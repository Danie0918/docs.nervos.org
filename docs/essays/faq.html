<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>CKB FAQs · Nervos CKB Docs</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## How do you allocate transaction fees to the committer and proposer?"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="CKB FAQs · Nervos CKB Docs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.nervos.org/"/><meta property="og:description" content="## How do you allocate transaction fees to the committer and proposer?"/><meta property="og:image" content="https://docs.nervos.org/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://docs.nervos.org/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-139882771-1"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments); }
              gtag('js', new Date());
              gtag('config', 'UA-139882771-1');
            </script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&amp;display=swap"/><script type="text/javascript" src="/js/extra.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.png" alt="Nervos CKB Docs"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/basics/introduction" target="_self">Basics</a></li><li class="siteNavGroupActive"><a href="/docs/reference/introduction" target="_self">Reference</a></li><li class="siteNavGroupActive"><a href="/docs/labs/introduction" target="_self">Labs</a></li><li class="siteNavGroupActive"><a href="/docs/integrate/introduction" target="_self">Integrate</a></li><li class="siteNavGroupActive"><a href="/docs/essays/introduction" target="_self">Essays</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Essays</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Basics<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/basics/introduction">Basics Introduction</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Concepts</h4><ul><li class="navListItem"><a class="navItem" href="/docs/basics/concepts/nervos-blockchain">Nervos Blockchain</a></li><li class="navListItem"><a class="navItem" href="/docs/basics/concepts/cell-model">Cell Model</a></li><li class="navListItem"><a class="navItem" href="/docs/basics/concepts/consensus">Consensus</a></li><li class="navListItem"><a class="navItem" href="/docs/basics/concepts/economics">Economics</a></li><li class="navListItem"><a class="navItem" href="/docs/basics/concepts/ckb-vm">CKB-VM</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/basics/guides/devchain">Run a CKB Dev Blockchain</a></li><li class="navListItem"><a class="navItem" href="/docs/basics/guides/mainnet">Run a CKB Mainnet Node</a></li><li class="navListItem"><a class="navItem" href="/docs/basics/guides/testnet">Run a CKB Testnet Node</a></li><li class="navListItem"><a class="navItem" href="/docs/basics/guides/neuron">Neuron Wallet Guide</a></li><li class="navListItem"><a class="navItem" href="/docs/basics/guides/run-ckb-with-docker">Run a CKB Mainnet Node and Testnet Node with Docker</a></li><li class="navListItem"><a class="navItem" href="/docs/basics/guides/get-ckb">Get CKB Binary</a></li><li class="navListItem"><a class="navItem" href="/docs/basics/guides/ckb-on-windows">Build CKB on Windows</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/basics/tools">Tools</a></li><li class="navListItem"><a class="navItem" href="/docs/basics/glossary">Glossary</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Reference<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/reference/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/reference/cell">Cell</a></li><li class="navListItem"><a class="navItem" href="/docs/reference/script">Script</a></li><li class="navListItem"><a class="navItem" href="/docs/reference/transaction">Transaction</a></li><li class="navListItem"><a class="navItem" href="/docs/reference/rpc">JSON-RPC</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Labs<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/labs/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/labs/sudtbycapsule">Write a SUDT script by Capsule</a></li><li class="navListItem"><a class="navItem" href="/docs/labs/lumos-nervosdao">Introduction to Lumos via NervosDAO</a></li><li class="navListItem"><a class="navItem" href="/docs/labs/capsule-dynamic-loading-tutorial">Dynamic loading in Capsule</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Integrate<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/integrate/introduction">Nervos CKB Mainnet - Integration Guide</a></li><li class="navListItem"><a class="navItem" href="/docs/integrate/qa">Q&amp;A | For Wallets/Exchanges/Mining Pools</a></li><li class="navListItem"><a class="navItem" href="/docs/integrate/sdk">Nervos CKB SDK</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Essays<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/essays/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/essays/rfcs">A Tour of RFCs</a></li><li class="navListItem"><a class="navItem" href="/docs/essays/lifecycle">Transaction validation lifecycle</a></li><li class="navListItem"><a class="navItem" href="/docs/essays/debug">Tips for debugging CKB script</a></li><li class="navListItem"><a class="navItem" href="/docs/essays/pprof">Tips for profiling CKB script</a></li><li class="navListItem"><a class="navItem" href="/docs/essays/rules">The General Workflow for Constructing a Transaction</a></li><li class="navListItem"><a class="navItem" href="/docs/essays/dependencies">Script dependencies</a></li><li class="navListItem"><a class="navItem" href="/docs/essays/introduction-to-ckb-studio">Introduction to CKB Studio</a></li><li class="navListItem"><a class="navItem" href="/docs/essays/polyjuice">Technical Bits on Polyjuice</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/essays/faq">CKB FAQs</a></li><li class="navListItem"><a class="navItem" href="/docs/essays/ckb-core-dev">Tips for CKB development</a></li><li class="navListItem"><a class="navItem" href="/docs/essays/integrity-check">Integrity Check for CKB Release</a></li><li class="navListItem"><a class="navItem" href="/docs/essays/mint-sudt-via-contract">Mint SUDT via Contract</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">CKB FAQs</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="how-do-you-allocate-transaction-fees-to-the-committer-and-proposer"></a><a href="#how-do-you-allocate-transaction-fees-to-the-committer-and-proposer" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How do you allocate transaction fees to the committer and proposer?</h2>
<p>one transaction fee is F Shannon, poposer will get</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-title">floor</span><span class="hljs-params">(F * <span class="hljs-number">4</span> / <span class="hljs-number">10</span>)</span></span>
</code></pre>
<p>and committer will get</p>
<pre><code class="hljs">F - floor(F * <span class="hljs-number">4</span> / <span class="hljs-number">10</span>)
</code></pre>
<p>We should allocate each transaction fee separately, instead of summing all transaction fees and then allocating to the committer and proposer.</p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="what-is-the-rpc-send_transaction-outputs-validator"></a><a href="#what-is-the-rpc-send_transaction-outputs-validator" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is the RPC <code>send_transaction</code> Outputs Validator?</h2>
<p>Outputs validator prevents improperly formed transactions from entering the tx-pool, in most cases, the main reason for the client to send these transactions is simply due to error codes or abuse of the SDK, which makes the transactions unlockable.</p>
<p><strong>Implementation details</strong></p>
<p>CKB provides two built-in validators: <code>default</code> and <code>passthrough</code>.</p>
<p>For <code>default</code> validator, these checks should conform to the pseudocode described below</p>
<pre><code class="hljs">transaction.outputs.all{ |output|
   <span class="hljs-built_in"> script </span>= output.script
    (script.code_hash == secp256k1_blake160_sighash_all &amp;&amp; script.hash_type == <span class="hljs-string">"type"</span> &amp;&amp; script.args.size == 20) ||
    (script.code_hash == secp256k1_blake160_multisig_all &amp;&amp; script.hash_type == <span class="hljs-string">"type"</span> &amp;&amp; （script.args.size == 20 || (script.args.size == 28 &amp;&amp; script.args[20<span class="hljs-built_in">..</span>28].is_valid_since_format))
}
transaction.outputs.all{ |output|
   <span class="hljs-built_in"> script </span>= output.type
    script.is_null || script.code_hash == dao &amp;&amp; script.hash_type == <span class="hljs-string">"type"</span>
}
</code></pre>
<p>For <code>passthrough</code> validator, it will skip validation.</p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="how-the-primary-and-secondary-epoch-reward-is-allocated-among-blocks"></a><a href="#how-the-primary-and-secondary-epoch-reward-is-allocated-among-blocks" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How the primary and secondary epoch reward is allocated among blocks?</h2>
<p>Let's suppose that the epoch reward is R, and the epoch length is L. The start block number of the epoch is S.</p>
<pre><code class="hljs"><span class="hljs-attr">M</span> = R mod L
</code></pre>
<p>For block from S (inclusively) to S + M (exclusively), the reward is</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-title">floor</span><span class="hljs-params">(R / L)</span></span> + <span class="hljs-number">1</span>
</code></pre>
<p>And for block from S + M (inclusively) to S + L (exclusively), the reward is</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-title">floor</span><span class="hljs-params">(R / L)</span></span>
</code></pre>
<hr>
<h2><a class="anchor" aria-hidden="true" id="how-do-you-calculate-transaction-fee"></a><a href="#how-do-you-calculate-transaction-fee" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How do you calculate transaction fee?</h2>
<p>The size of a normal two-in-two-out transaction is 597 bytes, to calculate transaction fee we need add extra 4 bytes size due to the cost of serialized tx in a block.</p>
<p><code>(tx_size + 4) * fee_rate / 1000</code></p>
<p>Let's suppose that we use <code>1000 shannons/KB</code> as fee_rate(how many shannons per KB charge), the transaction fee is <code>(597 + 4) * 1000 / 1000</code>, 601 shannons (0.00000601 CKB).</p>
<blockquote>
<p>NOTICE: this fee calculation method may do not match txs consumed too many cycles. In that case,  unless you pay more, the node will package tx in low priority.</p>
</blockquote>
<hr>
<h2><a class="anchor" aria-hidden="true" id="what-is-the-min_fee_rate"></a><a href="#what-is-the-min_fee_rate" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is the <code>min_fee_rate</code>?</h2>
<p>CKB Node operator can set the value called <code>min_fee_rate</code> in <code>ckb.toml</code> to decide ignore txs with lower fees than <code>min_fee_rate</code>.</p>
<ul>
<li><code>send_transaction</code> RPC will not accept txs which fee lower than <code>min_fee_rate</code></li>
<li>The node will stop to relay txs with lower fee than <code>min_fee_rate</code></li>
</ul>
<p>The default value of <code>min_fee_rate</code> is <code>1000</code>.</p>
<pre><code class="hljs css language-toml"><span class="hljs-attr">min_fee_rate</span> = <span class="hljs-number">1_000</span> <span class="hljs-comment"># shannons/KB</span>
</code></pre>
<p>Which mean a tx need at least <code>(tx_size + 4) * 1000 / 1000</code> shannons as the tx fee.</p>
<blockquote>
<p>NOTICE: Even though you can set <code>min_fee_rate</code> lower than the default value, other nodes in the network may still use the default value, which may cause the tx you accept still can't be relayed to other nodes, unless your node is also a miner or mining pool so that you can mine those txs by yourself.</p>
</blockquote>
<hr>
<h2><a class="anchor" aria-hidden="true" id="can-you-estimate-transaction-fee"></a><a href="#can-you-estimate-transaction-fee" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Can you estimate transaction fee?</h2>
<p>The CKB node supports to estimate transaction fee, you can open the <code>Experiment</code> in <code>ckb.toml</code> RPC modules to use the feature. For more details, you may refer to <a href="https://github.com/nervosnetwork/ckb/tree/develop/rpc#estimate_fee_rate">estimate_fee_rate</a></p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="what-is-compact_target-in-the-block-header"></a><a href="#what-is-compact_target-in-the-block-header" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is <code>compact_target</code> in the block header?</h2>
<p><code>compact_target</code> is the encoded form of the target threshold which appears in the block header.</p>
<p>It is similar to <code>nBits</code> of bitcoin, the original <code>nBits</code> implementation inherits properties from a signed data class,if the high bit of the effective number of bits is set, the target threshold will be negative. This is useless—the header hash is considered as an unsigned number, so it can never be equal to or lower than a negative target threshold.</p>
<p>In CKB, the &quot;compact&quot; format is represented a whole number N using an unsigned 32bit number,which is similar to a floating-point format.</p>
<ul>
<li>The most significant 8 bits are the unsigned exponent of base 256.</li>
<li>The exponent can be considered as &quot;number of bytes of N&quot;.</li>
<li>The lower 24 bits are the mantissa.</li>
</ul>
<pre><code class="hljs">N = mantissa * <span class="hljs-number">256</span>^(exponent<span class="hljs-number">-3</span>)
</code></pre>
<p>There are example and test vectors in Python 3, you may refer <a href="https://github.com/nervosnetwork/ckb/blob/develop/util/types/src/utilities/difficulty.rs#L103">here</a> for more details :</p>
<pre><code class="hljs css language-python"><span class="hljs-keyword">import</span> unittest

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">compact_to_target</span><span class="hljs-params">(compact)</span>:</span>
    exponent = compact &gt;&gt; <span class="hljs-number">24</span>
    mantissa = compact &amp; <span class="hljs-number">0x00ffffff</span>
    rtn = <span class="hljs-number">0</span>
    <span class="hljs-keyword">if</span> (exponent &lt;= <span class="hljs-number">3</span>):
        mantissa &gt;&gt;= (<span class="hljs-number">8</span> * (<span class="hljs-number">3</span> - exponent))
        rtn = mantissa
    <span class="hljs-keyword">else</span>:
        rtn = mantissa
        rtn &lt;&lt;= (<span class="hljs-number">8</span> * (exponent - <span class="hljs-number">3</span>))
    overflow = mantissa != <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> (exponent &gt; <span class="hljs-number">32</span>)
    <span class="hljs-keyword">return</span> rtn, overflow


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">target_to_compact</span><span class="hljs-params">(target)</span>:</span>
    bits = (target).bit_length()
    exponent = ((bits + <span class="hljs-number">7</span>) // <span class="hljs-number">8</span>)
    compact = target &lt;&lt; (
        <span class="hljs-number">8</span> * (<span class="hljs-number">3</span> - exponent)) <span class="hljs-keyword">if</span> exponent &lt;= <span class="hljs-number">3</span> <span class="hljs-keyword">else</span> (target &gt;&gt; (<span class="hljs-number">8</span> * (exponent - <span class="hljs-number">3</span>)))
    compact = (compact | (exponent &lt;&lt; <span class="hljs-number">24</span>))
    <span class="hljs-keyword">return</span> compact


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestCompactTarget</span><span class="hljs-params">(unittest.TestCase)</span>:</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_compact_target1</span><span class="hljs-params">(self)</span>:</span>
        compact = target_to_compact(<span class="hljs-number">0x2</span>)
        self.assertEqual(<span class="hljs-string">'0x1020000'</span>, hex(compact))
        target, overflow = compact_to_target(<span class="hljs-number">0x1020000</span>)
        self.assertTupleEqual((<span class="hljs-number">2</span>, <span class="hljs-literal">False</span>), (target, overflow))

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_compact_target2</span><span class="hljs-params">(self)</span>:</span>
        compact = target_to_compact(<span class="hljs-number">0xfe</span>)
        self.assertEqual(<span class="hljs-string">'0x1fe0000'</span>, hex(compact))
        target, overflow = compact_to_target(<span class="hljs-number">0x1fedcba</span>)
        self.assertTupleEqual((<span class="hljs-number">0xfe</span>, <span class="hljs-literal">False</span>), (target, overflow))


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    unittest.main()

</code></pre>
<hr>
<h2><a class="anchor" aria-hidden="true" id="how-do-you-set-the-value-of-capacity-in-a-cell"></a><a href="#how-do-you-set-the-value-of-capacity-in-a-cell" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How do you set the value of <code>capacity</code> in a Cell?</h2>
<p>The field <code>capacity</code> in a cell must be larger than or equal to cell's own occupied capacity. The minimal occupied capacity of a secp256k1 cell is 61 bytes.</p>
<pre><code class="hljs">occupied(<span class="hljs-string">cell:</span> Cell) = sum of
- <span class="hljs-string">capacity:</span> <span class="hljs-number">8</span> bytes
- <span class="hljs-string">data:</span> len(data) bytes
- <span class="hljs-string">lock:</span> occupied(<span class="hljs-string">lock:</span> Script)
- <span class="hljs-string">type:</span>
    - when <span class="hljs-string">present:</span> occupied(<span class="hljs-string">type:</span> Script)
    - when <span class="hljs-string">absent:</span> <span class="hljs-number">0</span> bytes

occupied(<span class="hljs-string">script:</span> Script) = sum <span class="hljs-string">of:</span>
- <span class="hljs-string">args:</span> len(args) bytes
- code\<span class="hljs-string">_hash:</span> <span class="hljs-number">32</span> bytes
- hash\<span class="hljs-string">_type:</span> <span class="hljs-number">1</span> <span class="hljs-keyword">byte</span>
</code></pre>
<p>There is a demo in JavaScript:</p>
<pre><code class="hljs css language-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hex_data_occupied_bytes</span>(<span class="hljs-params">hex_string</span>) </span>{
  <span class="hljs-comment">// Exclude 0x prefix, and every 2 hex digits are one byte</span>
  <span class="hljs-keyword">return</span> (hex_string.length - <span class="hljs-number">2</span>) / <span class="hljs-number">2</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">script_occupied_bytes</span>(<span class="hljs-params">script</span>) </span>{
  <span class="hljs-keyword">if</span> (script !== <span class="hljs-literal">undefined</span> &amp;&amp; script !== <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">return</span> (
      <span class="hljs-number">1</span> + hex_data_occupied_bytes(script.code_hash) +
      hex_data_occupied_bytes(script.args)
    );
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cell_occupied_bytes</span>(<span class="hljs-params">cell</span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="hljs-number">8</span> +
    hex_data_occupied_bytes(cell.data) +
    script_occupied_bytes(cell.lock) +
    script_occupied_bytes(cell.type)
  );
}
</code></pre>
<p>There is the test case:</p>
<pre><code class="hljs css language-js"><span class="hljs-built_in">console</span>.log(
  cell_occupied_bytes({
    <span class="hljs-attr">capacity</span>: <span class="hljs-string">"4500000000"</span>,
    <span class="hljs-attr">data</span>: <span class="hljs-string">"0x72796c6169"</span>,
    <span class="hljs-attr">lock</span>: {
      <span class="hljs-attr">args</span>: <span class="hljs-string">"0x"</span>,
      <span class="hljs-attr">hash_type</span>: <span class="hljs-string">"data"</span>,
      <span class="hljs-attr">code_hash</span>:
        <span class="hljs-string">"0xb35557e7e9854206f7bc13e3c3a7fa4cf8892c84a09237fb0aab40aab3771eee"</span>
    },
    <span class="hljs-attr">type</span>: <span class="hljs-literal">null</span>
  })
);
<span class="hljs-comment">// =&gt; 46</span>
</code></pre>
<hr>
<h2><a class="anchor" aria-hidden="true" id="how-do-you-use-the-rpc-subscription"></a><a href="#how-do-you-use-the-rpc-subscription" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How do you use the RPC subscription?</h2>
<p>RPC subscriptions require a full duplex connection. CKB provides this kind of connection by tcp (enable with rpc.tcp_listen_address configuration option) and websockets (enable with rpc.ws_listen_address).</p>
<p>tcp rpc subscription example:</p>
<pre><code class="hljs css language-shell">telnet localhost 18114
<span class="hljs-meta">&gt;</span><span class="bash"> {<span class="hljs-string">"id"</span>: 2, <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>, <span class="hljs-string">"method"</span>: <span class="hljs-string">"subscribe"</span>, <span class="hljs-string">"params"</span>: [<span class="hljs-string">"new_tip_header"</span>]}</span>
&lt; {"jsonrpc":"2.0","result":0,"id":2}
&lt; {"jsonrpc":"2.0","method":"subscribe","params":{"result":"...block header json...","subscription":0}}
&lt; {"jsonrpc":"2.0","method":"subscribe","params":{"result":"...block header json...","subscription":0}}
&lt; ...
<span class="hljs-meta">&gt;</span><span class="bash"> {<span class="hljs-string">"id"</span>: 2, <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>, <span class="hljs-string">"method"</span>: <span class="hljs-string">"unsubscribe"</span>, <span class="hljs-string">"params"</span>: [0]}</span>
&lt; {"jsonrpc":"2.0","result":true,"id":2}
</code></pre>
<p>websocket rpc subscription example:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">let</span> socket = <span class="hljs-keyword">new</span> WebSocket(<span class="hljs-string">"ws://localhost:28114"</span>)

socket.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Data received from server: <span class="hljs-subst">${event.data}</span>`</span>);
}

socket.send(<span class="hljs-string">`{"id": 2, "jsonrpc": "2.0", "method": "subscribe", "params": ["new_tip_header"]}`</span>)

socket.send(<span class="hljs-string">`{"id": 2, "jsonrpc": "2.0", "method": "unsubscribe", "params": [0]}`</span>)
</code></pre>
<hr>
<h2><a class="anchor" aria-hidden="true" id="what-are-the-special-live-cells-in-ckb"></a><a href="#what-are-the-special-live-cells-in-ckb" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What are the special live cells in CKB?</h2>
<p>There are some special live cells deployed in Testnet.</p>
<p><strong>duktape VM (JavaScript) cell</strong></p>
<p>The VM cell is deployed in transaction <a href="https://explorer.nervos.org/aggron/transaction/0xff4893d8054a365e505074c1d0ee2cc13e72dd9be4c0487fe7a48478f075b036"><code>0xff4893d8054a365e505074c1d0ee2cc13e72dd9be4c0487fe7a48478f075b036</code></a> output index <code>0</code>.
We should put the <code>out_point</code> in <code>cell_deps</code>, looks like:</p>
<pre><code class="hljs css language-javascript">{
  <span class="hljs-string">"out_point"</span>: {
    <span class="hljs-string">"tx_hash"</span>: <span class="hljs-string">"0xff4893d8054a365e505074c1d0ee2cc13e72dd9be4c0487fe7a48478f075b036"</span>,
    <span class="hljs-string">"index"</span>: <span class="hljs-string">"0x0"</span>
  },
  <span class="hljs-string">"dep_type"</span>: <span class="hljs-string">"code"</span>
}
</code></pre>
<p>And your type script may use this VM like:</p>
<pre><code class="hljs css language-javascript">{
  <span class="hljs-string">"code_hash"</span>: <span class="hljs-string">"0xfb8e791d70c4622ae0bd0127ee9597aea612e42929e725f7f3f25475bb954ce9"</span>,
  <span class="hljs-string">"hash_type"</span>: <span class="hljs-string">"data"</span>,
  <span class="hljs-string">"args"</span>: <span class="hljs-string">"0x&lt;your javascript code in hex&gt;"</span>,
}
</code></pre>
<p>There is an <a href="https://explorer.nervos.org/aggron/transaction/0xbbe58d19e6177ea16336e566c6cdbb91cb6ad74e0f76ccb17d980e5702e4615a">example transaction</a> using duktape VM. If your logger(in <code>ckb.toml</code>) filter is set to <code>filter = &quot;info,ckb-script=debug&quot;</code> , you will see a log:</p>
<pre><code class="hljs"><span class="hljs-builtin-name">DEBUG</span> ckb-script <span class="hljs-built_in"> script </span>group: Byte32(0xafe527276275a4a25defee32ed59ecebf4813256866a7577431e5293acd2048b) <span class="hljs-builtin-name">DEBUG</span> OUTPUT: I<span class="hljs-string">'m running in JS!
</span></code></pre>
<p>If you want to deploy the duktape VM cell by yourself, please refer to <a href="https://xuejie.space/2019_07_13_introduction_to_ckb_script_programming_script_basics/#introducing-duktape">this article</a>.</p>
<p><strong>mruby VM (Ruby)cell</strong></p>
<p>The VM cell is deployed in transaction <a href="https://explorer.nervos.org/aggron/transaction/0x1850f997f867b6d3f1154444498a15e9fc4ce080215e34d0c41b33349bcc119a"><code>0x1850f997f867b6d3f1154444498a15e9fc4ce080215e34d0c41b33349bcc119a</code></a> output index <code>0</code>.
We should put the <code>out_point</code> in <code>cell_deps</code>, looks like:</p>
<pre><code class="hljs css language-javascript">{
  <span class="hljs-string">"out_point"</span>: {
    <span class="hljs-string">"tx_hash"</span>: <span class="hljs-string">"0x1850f997f867b6d3f1154444498a15e9fc4ce080215e34d0c41b33349bcc119a"</span>,
    <span class="hljs-string">"index"</span>: <span class="hljs-string">"0x0"</span>
  },
  <span class="hljs-string">"dep_type"</span>: <span class="hljs-string">"code"</span>
}
</code></pre>
<p>And your type script may use this VM like:</p>
<pre><code class="hljs css language-javascript">{
  <span class="hljs-string">"code_hash"</span>: <span class="hljs-string">"0xc3815b09286d825574f672bf4e04566ae6daaf1b45f3f1bcfd20c720198652ec"</span>,
  <span class="hljs-string">"hash_type"</span>: <span class="hljs-string">"data"</span>,
  <span class="hljs-string">"args"</span>: <span class="hljs-string">"0x&lt;your ruby code in hex&gt;"</span>,
}
</code></pre>
<p>If you want to deploy the mruby VM (Ruby)cell by yourself, you may follow these instructions below</p>
<ul>
<li>Step 1, build the mruby binary:</li>
</ul>
<pre><code class="hljs">$ git clone <span class="hljs-params">--recursive</span> https:<span class="hljs-string">//github.com/nervosnetwork/ckb-mruby</span>
$ <span class="hljs-keyword">cd</span> ckb-mruby
$ sudo docker run <span class="hljs-params">--rm</span> -it -v `<span class="hljs-keyword">pwd</span>`:<span class="hljs-string">/code</span> nervos/ckb-riscv-gnu-toolchain<span class="hljs-function">:bionic-20191012</span> bash
root@982d1e906b76:/<span class="hljs-comment"># apt-get update</span>
root@982d1e906b76:/<span class="hljs-comment"># apt-get install -y ruby</span>
root@982d1e906b76:/<span class="hljs-comment"># cd /code</span>
root@982d1e906b76:<span class="hljs-string">/code</span><span class="hljs-comment"># make</span>
root@982d1e906b76:<span class="hljs-string">/code</span><span class="hljs-comment"># exit</span>
</code></pre>
<ul>
<li>Step 2, deploy the binary via create a cell with the binary data:</li>
</ul>
<pre><code class="hljs">$ ckb-cli wallet transfer --<span class="hljs-keyword">from</span>-account &lt;<span class="hljs-keyword">from</span>-account&gt; --to-address &lt;to-address&gt; --capacity <span class="hljs-number">462000</span> --to-data-path build/entry --tx-fee <span class="hljs-number">0.01</span>
<span class="hljs-number">0x1850f997f867b6d3f1154444498a15e9fc4ce080215e34d0c41b33349bcc119a</span>
</code></pre>
<ul>
<li>Step 3, query the data hash of the binary:</li>
</ul>
<pre><code class="hljs"><span class="hljs-comment">$</span> <span class="hljs-comment">ckb</span><span class="hljs-literal">-</span><span class="hljs-comment">cli</span> <span class="hljs-comment">rpc</span> <span class="hljs-comment">get_live_cell</span> --<span class="hljs-comment">tx</span><span class="hljs-literal">-</span><span class="hljs-comment">hash</span> <span class="hljs-comment">0x1850f997f867b6d3f1154444498a15e9fc4ce080215e34d0c41b33349bcc119a</span> --<span class="hljs-comment">index</span> <span class="hljs-comment">0</span> --<span class="hljs-comment">with</span><span class="hljs-literal">-</span><span class="hljs-comment">data</span>
</code></pre>
<hr>
<h2><a class="anchor" aria-hidden="true" id="how-do-you-estimate-the-timestamp-in-ckb"></a><a href="#how-do-you-estimate-the-timestamp-in-ckb" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How do you estimate the timestamp in CKB?</h2>
<p>In CKB, based on the deterministic state of the chain,there is no way to know which block a transaction will be packaged into, and there is no way to get an accurate time,so we can estimate the timestamp like this:</p>
<pre><code class="hljs">median of previous <span class="hljs-number">37</span> block timpstamp &lt; timestamp &lt;= local_time + <span class="hljs-number">15</span>s
</code></pre>
<hr>
<h2><a class="anchor" aria-hidden="true" id="what-gotchas-should-you-pay-attention-to-in-nervos-daohttpsgithubcomnervosnetworkrfcsblobmasterrfcs0023-dao-deposit-withdraw0023-dao-deposit-withdrawmd"></a><a href="#what-gotchas-should-you-pay-attention-to-in-nervos-daohttpsgithubcomnervosnetworkrfcsblobmasterrfcs0023-dao-deposit-withdraw0023-dao-deposit-withdrawmd" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What gotchas should you pay attention to in <a href="https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0023-dao-deposit-withdraw/0023-dao-deposit-withdraw.md">Nervos DAO</a>?</h2>
<p>Due to CKB's unique flexibility, it also comes with some gotchas to be aware of. Otherwise there might be risk locking your cell forever with no way to unlock them. Here, we try our best to document the gotchas we know:</p>
<ul>
<li><p>Nervos DAO only supports <em>absolute epoch number</em> as since value when withdrawing from Nervos DAO. So if you are using a lock that supports lock period, such as the system included <a href="https://github.com/nervosnetwork/ckb-system-scripts/blob/master/c/secp256k1_blake160_multisig_all.c">multi-sign script</a>, please make sure to ONLY use <em>absolute epoch number</em> as lock period. Otherwise the locked Nervos DAO cell cannot be spent.</p></li>
<li><p>CKB has a maturity limitation on referencing headers: a block header can only be referenced in a cell that is committed at least 4 epochs after the referenced block header. This means in situations where header deps are used, those 4 epoch limitation also applies. Nervos DAO, for example, is restricted in the following places:</p>
<ul>
<li>Phase 1 transaction can only be committed 4 epochs after the fund is originally deposited.</li>
<li>Phase 2 transaction can only be committed 4 epochs after phase 1 transaction is committed.</li>
</ul></li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/essays/polyjuice"><span class="arrow-prev">← </span><span>Technical Bits on Polyjuice</span></a><a class="docs-next button" href="/docs/essays/ckb-core-dev"><span>Tips for CKB development</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#how-do-you-allocate-transaction-fees-to-the-committer-and-proposer">How do you allocate transaction fees to the committer and proposer?</a></li><li><a href="#what-is-the-rpc-send_transaction-outputs-validator">What is the RPC <code>send_transaction</code> Outputs Validator?</a></li><li><a href="#how-the-primary-and-secondary-epoch-reward-is-allocated-among-blocks">How the primary and secondary epoch reward is allocated among blocks?</a></li><li><a href="#how-do-you-calculate-transaction-fee">How do you calculate transaction fee?</a></li><li><a href="#what-is-the-min_fee_rate">What is the <code>min_fee_rate</code>?</a></li><li><a href="#can-you-estimate-transaction-fee">Can you estimate transaction fee?</a></li><li><a href="#what-is-compact_target-in-the-block-header">What is <code>compact_target</code> in the block header?</a></li><li><a href="#how-do-you-set-the-value-of-capacity-in-a-cell">How do you set the value of <code>capacity</code> in a Cell?</a></li><li><a href="#how-do-you-use-the-rpc-subscription">How do you use the RPC subscription?</a></li><li><a href="#what-are-the-special-live-cells-in-ckb">What are the special live cells in CKB?</a></li><li><a href="#how-do-you-estimate-the-timestamp-in-ckb">How do you estimate the timestamp in CKB?</a></li><li><a href="#what-gotchas-should-you-pay-attention-to-in-nervos-daohttpsgithubcomnervosnetworkrfcsblobmasterrfcs0023-dao-deposit-withdraw0023-dao-deposit-withdrawmd">What gotchas should you pay attention to in <a href="https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0023-dao-deposit-withdraw/0023-dao-deposit-withdraw.md">Nervos DAO</a>?</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div class="footerSection"><h5>Foundation</h5><a href="https://www.nervos.org/">About Us</a></div><div class="footerSection"><h5>Developer</h5><a href="https://github.com/nervosnetwork">GitHub</a><a href="https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0002-ckb/0002-ckb.md">Whitepaper</a><a href="https://github.com/nervosnetwork/rfcs">RFCs</a></div><div class="footerSection socialLinks"><a href="https://twitter.com/nervosnetwork" class="socialLink"><img src="/img/footer_twitter.png"/>Twitter</a><a href="https://medium.com/nervosnetwork" class="socialLink"><img src="/img/footer_medium.png"/>Blog</a><a href="https://t.me/nervosnetwork" class="socialLink"><img src="/img/footer_telegram.png"/>Telegram</a><a href="https://www.reddit.com/r/NervosNetwork/" class="socialLink"><img src="/img/footer_reddit.png"/>Reddit</a><a href="https://www.youtube.com/channel/UCONuJGdMzUY0Y6jrPBOzH7A" class="socialLink"><img src="/img/footer_youtube.png"/>YouTube</a><a href="https://talk.nervos.org/" class="socialLink"><img src="/img/footer_forum.png"/>Forum</a></div></section><section class="copyright"><span>Copyright © 2020  Nervos Foundation. All Rights Reserved.</span></section></footer><div id="oldSiteLink"><div><span>Note we&#x27;ve completely rebuilt Nervos Doc site! </span><span>For the old doc site, please see <a href="https://docs-old.nervos.org">docs-old</a>.</span></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '4ca49bc7433bcef238e8b9aab6dc4d11',
                indexName: 'nervos_ckbd',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>